---
layout:     ppt
title:      "ã€PPTã€‘çˆ¬è™«é…ç½®è®²è§£"
subtitle:   ""
date:       2021-07-12 09:14:00
author:     "luohq"
header-img: "img/about-bg.jpg"
tags:
    - ppt
---
<textarea data-template>
### ä¸šåŠ¡èƒŒæ™¯
1. æ•°æ®ç»„æƒ³è¦ç¬¬ä¸€æ—¶é—´è·å–å„åœ°é™è¡Œè§„åˆ™
2. æ•°æ®ç»„æ•´ç†äº†å¤§é‡æä¾›é™è¡Œæ–°é—»çš„ç½‘ç«™ã€å¾®ä¿¡å…¬ä¼—å·ã€æ–°æµªå¾®åš
3. æ•°æ®ç»„ä»…éœ€è¦ç½‘ç«™å†…å®¹ä¸­åŒ…å«é™è¡Œæç¤ºçš„å†…å®¹ï¼ˆå³æ–‡ç« è¯¦æƒ…ä¸­åŒ…å«å…³é”®å­—'é™è¡Œ'ç­‰ï¼‰
4. ç½‘ç«™å†…å®¹çš„æå–è¿‡ç¨‹å¤§è‡´éµå¾ªï¼šç½‘ç«™é“¾æ¥ -> æ–‡ç« é“¾æ¥åˆ—è¡¨ -> ç‚¹å‡»é“¾æ¥è·å–æ­£æ–‡è¯¦æƒ…

--

### å¼€å‘èƒŒæ™¯
1. å¼€å‘ä¸€ä¸ªé€šç”¨çš„ç½‘ç«™çˆ¬å–å·¥å…·ï¼Œæœ€å¥½å¯ä»¥é…ç½®çˆ¬å–è§„åˆ™
2. çˆ¬è™«å·¥å…·é€‰æ‹©Python Scrapyï¼šå¯¹äºç½‘ç«™çš„è¶…é“¾æ¥åˆ—è¡¨æå–åŸºäºScrapy.CrawlSpider rulesï¼Œå¯¹æ–‡ç« è¯¦æƒ…å†…å®¹çš„æå–åŸºäºItemLoaders selector
3. çˆ¬è™«è§„åˆ™åŸºäºJSONï¼ˆstart_urls, crawl_rules, item_rulesï¼‰
4. éœ€è¦æä¾›ä¸€ä¸ªçˆ¬è™«è§„åˆ™éªŒè¯å·¥å…·ï¼ˆScrapy+Flaskï¼‰ï¼Œå¯ä»¥éªŒè¯çˆ¬å–è§„åˆ™å¯¹åº”çš„çˆ¬å–ç»“æœæ˜¯å¦æ­£ç¡®

--

<font color='green'><b>ç›¸å…³ä¾èµ–ğŸ€ </b></font><br/>
1. [ğŸ”—Python Scrapyå®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.scrapy.org/en/latest/intro/overview.html](https://docs.scrapy.org/en/latest/intro/overview.html)<br/>
2. [ğŸ”—çˆ¬è™«å·¥å…· - æ·»åŠ æ•°æ®æ¥æºï¼šhttp://mx-datacollection-tool-ln.mxnavi.com/mainPage/DataSourceManagement](http://mx-datacollection-tool-ln.mxnavi.com/mainPage/DataSourceManagement)<Br/>
3. [ğŸ”—çˆ¬è™«é…ç½®éªŒè¯å·¥å…·ï¼šhttp://mx-crawl-spider-validator.inner.mxnavi.com/start](http://mx-crawl-spider-validator.inner.mxnavi.com/start)<br/>


---

### çˆ¬è™«é…ç½®è¯´æ˜
1. ç»™å‡ºwebç½‘ç«™åˆå§‹ç•Œé¢é“¾æ¥URL
2. æ ¹æ®cssï¼ˆæˆ–xpathï¼‰è§„åˆ™æå–å‡ºåˆå§‹ç•Œé¢ä¸­çš„è¶…é“¾æ¥ï¼ˆaæ ‡ç­¾ï¼‰åˆ—è¡¨
3. ä¾æ¬¡æ‰“å¼€æå–å‡ºçš„è¶…é“¾æ¥ï¼Œå¹¶ç¡®å®šè¯¦æƒ…ç•Œé¢ä¸­çš„æ ‡é¢˜ã€å‘å¸ƒæ—¥æœŸã€æ­£æ–‡å†…å®¹
4. å°†çˆ¬è™«è§„åˆ™æ·»åŠ åˆ°çˆ¬è™«æ•°æ®æ¥æºç•Œé¢ï¼šhttp://mx-datacollection-tool-ln.mxnavi.com/mainPage/DataSourceManagement

--

### çˆ¬è™«åç«¯é€»è¾‘
1. åç«¯çˆ¬è™«ä¼šå®šæ—¶æ‹‰å–é…ç½®
2. çˆ¬è™«æå–é…ç½®è§„åˆ™ä¸­ç½‘ç«™å¯¹åº”çš„è¯¦æƒ…é¡µä¸­çš„æ ‡é¢˜ã€å‘å¸ƒæ—¥æœŸã€æ­£æ–‡å†…å®¹
3. çˆ¬è™«å¯¹æ ‡é¢˜ã€æ­£æ–‡å†…å®¹ä¸­çš„æ˜¯å¦åŒ…å«å…³é”®å­—è¿›è¡Œè¿‡æ»¤
4. çˆ¬è™«ä»…å°†åŒ…å«å…³é”®å­—çš„ç½‘ç«™è¯¦æƒ…é¡µä¿å­˜åˆ°DB

---

### çˆ¬è™«ç¤ºä¾‹é…ç½®
```json
# è§„åˆ™ã€æœ¬åœ°å®-åŒ—äº¬ã€‘ç¤ºä¾‹å¦‚ä¸‹ï¼ˆæ›´å¤šç¤ºä¾‹å‚è§é™„ä»¶ï¼šcrawl_config.txtï¼‰
{
    # åˆå§‹çˆ¬å–URLï¼ˆæ”¯æŒå¤šä¸ªï¼‰
    "start_urls": [
        "http://bj.bendibao.com/news/list_17_175_1.htm"],

    # ç•Œé¢ä¸­linkæå–è§„åˆ™ï¼ˆæ”¯æŒrestrict_css, restrict_xpath, restrict_jsonï¼‰ï¼Œä¸”æ”¯æŒå¤šæ¡è§„åˆ™ï¼Œ
    # å…¶ä¸­restrict_css, restrict_xpathæ”¯æŒhtmlé¡µé¢è§£æï¼Œè€Œrestrict_jsonæ”¯æŒajaxè¯·æ±‚ï¼ˆrestrict_jsonä¸ºè‡ªå®šä¹‰æå–å™¨ï¼Œå®˜æ–¹æ–‡æ¡£æ²¡æœ‰ç›¸å…³è¯´æ˜ï¼‰
    # å…³äºcrawl_ruleså±æ€§å¯ä»¥å‚è€ƒï¼šhttps://docs.scrapy.org/en/latest/topics/link-extractors.html#topics-link-extractors
    "crawl_rules": [{
            "restrict_css": "#listNewsTimeLy > li > div.info > h3 > a",
            # ç›®å‰callbackä»…æ”¯æŒparse_htmlï¼ˆå³æ ¹æ®item_rulesæå–é¡µé¢ä¸­æ•°æ®ï¼‰
            "callback": "parse_html"
        }
    ],

    # htmlé¡µé¢ä¸­çš„æ•°æ®ä¿¡æ¯æå–è§„åˆ™ï¼ˆæ”¯æŒ{propName}_css|xpathï¼‰
    # ç›®å‰æ”¯æŒå±æ€§ï¼štitle, text, pulish_date
    "item_rules": {
        # {propName}_{type}: [selector1, selector2,...]ä¸”å–ç¬¬ä¸€ä¸ªselectoræœ‰å€¼çš„ç»“æœï¼ˆå¤šä¸ªselectorå…¼å®¹ä¸åŒç½‘é¡µå¸ƒå±€ï¼‰
        "title_css": ["body > div.wrapper > div.content_l > div.title.daoyu > h1 > strong"],
        "text_css": ["#bo"],
        "publish_date_css": ["body > div.wrapper > div.content_l > div.title.daoyu > div.article-info > span.time"]
    }
}
```

--

åœ¨Scrapyä¸­æ”¯æŒcssæ‰©å±•å±æ€§å¦‚ä¸‹ï¼š<br/>
- ï¼ˆ1ï¼‰::text  è·å–å…ƒç´ æ–‡æœ¬ä¿¡æ¯
- ï¼ˆ2ï¼‰::attr(name)  è·å–å…ƒç´ å±æ€§å€¼

---

<font color='red'><b>æ³¨æ„ğŸ’£</b></font><br/>
1. mailbirdéœ€ä»˜è´¹ä½¿ç”¨...
2. å…¶ä¸­ä¹Ÿä½¿ç”¨è¿‡yomailï¼ˆå·²åœæ­¢ç»´æŠ¤ï¼‰ã€mailspringï¼ˆä¸æ”¯æŒpop3ï¼‰ç­‰ç­‰ï¼Œæœ€ç»ˆé€‰ç”¨mailbird
3. ç ´è§£å®Œä¸€å®šè¦è®¾ç½®ä¸è‡ªåŠ¨æ›´æ–°ï¼Œå¦åˆ™mailbirdè‡ªåŠ¨å‡çº§åä¼šå¯¼è‡´ç ´è§£å¤±æ•ˆğŸ˜­

---

# OVERâœŒï¸

</textarea>
